{#{% extends 'TaskHelper/base.html' %}#}
{##}
{#{% block title %}æœˆç»Ÿè®¡{% endblock %}#}
{##}
{#{% block breadcrumbs %}#}
{##}
{#<nav aria-label="breadcrumb">#}
{#  <ol class="breadcrumb">#}
{#    <li class="breadcrumb-item"><a href="{% url 'dashboard' %}">é¦–é¡µ</a></li>#}
{#    <li class="breadcrumb-item active" aria-current="page">æœˆç»Ÿè®¡</li>#}
{#  </ol>#}
{#</nav>#}
{#{% endblock %}#}
{##}
{#{% block content %}#}
{#<h2>ğŸ“ˆ æœˆç»Ÿè®¡ï¼ˆ{{ start_date }} ~ {{ end_date }}ï¼‰</h2>#}
{#<canvas id="monthlyChart" height="100"></canvas>#}
{#    <div class="mb-3">#}
{#        <button class="btn btn-outline-primary btn-sm me-2" onclick="changeChartType('bar')">æŸ±çŠ¶å›¾</button>#}
{#        <button class="btn btn-outline-secondary btn-sm" onclick="changeChartType('line')">æŠ˜çº¿å›¾</button>#}
{#    </div>#}
{#<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>#}
{#<script>#}
{#    let chartType = 'bar';#}
{#    const ctx = document.getElementById('monthlyChart').getContext('2d');#}
{##}
{#    const chartConfig = {#}
{#        type: chartType,#}
{#        data: {#}
{#            labels: {{ labels|safe }},#}
{#            datasets: [#}
{#                {#}
{#                    label: 'å®Œæˆæ•°',#}
{#                    data: {{ completed_data|safe }},#}
{#                    backgroundColor: 'rgba(50,255,50,0.7)',#}
{#                    borderColor: 'rgb(50,255,50)',#}
{#                    fill: false#}
{#                },#}
{#                {#}
{#                    label: 'é”™è¯¯æ•°',#}
{#                    data: {{ error_data|safe }},#}
{#                    backgroundColor: 'rgba(255,50,50,0.7)',#}
{#                    borderColor: 'rgb(255,50,50)',#}
{#                    fill: false#}
{#                }#}
{#            ]#}
{#        },#}
{#        options: {#}
{#            responsive: true,#}
{#            scales: {#}
{#                y: { beginAtZero: true }#}
{#            }#}
{#        }#}
{#    };#}
{##}
{#    let myChart = new Chart(ctx, chartConfig);#}
{##}
{#    function changeChartType(type) {#}
{#        myChart.destroy();#}
{#        chartConfig.type = type;#}
{#        myChart = new Chart(ctx, chartConfig);#}
{#    }#}
{#</script>#}
{##}
{#{% endblock %}#}


{% extends 'TaskHelper/base.html' %}
{% load range_tags %}

{% block content %}
<h3>ğŸ“† æœˆç»Ÿè®¡ï¼ˆ{{ start_date }} ~ {{ end_date }}ï¼‰</h3>

<form method="get" id="monthForm" class="d-flex gap-2 mb-4">
  <select name="year" class="form-select w-auto" onchange="document.getElementById('monthForm').submit()">
    {% for y in 2022|to:2025 %}
      <option value="{{ y }}" {% if y == year %}selected{% endif %}>{{ y }}</option>
    {% endfor %}
  </select>

  <select name="month" class="form-select w-auto" onchange="document.getElementById('monthForm').submit()">
    {% for m in 1|to:12 %}
      <option value="{{ m }}" {% if m == month %}selected{% endif %}>{{ m }} æœˆ</option>
    {% endfor %}
  </select>
</form>


<canvas id="monthlyChart"></canvas>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
new Chart(document.getElementById('monthlyChart').getContext('2d'), {
  type: 'bar',
  data: {
    labels: {{ labels|safe }},
    datasets: [
      {
        label: 'å®Œæˆæ•°',
        data: {{ completed_data|safe }},
        backgroundColor: 'rgba(54, 162, 235, 0.6)'
      },
      {
        label: 'é”™è¯¯æ•°',
        data: {{ error_data|safe }},
        backgroundColor: 'rgba(255, 99, 132, 0.6)'
      }
    ]
  },
  options: {
    responsive: true,
    scales: { y: { beginAtZero: true } }
  }
});
</script>
{% endblock %}
